---
title: "Shiny Dashboard for Sample Size and Power"
author: "Matthew F. Partridge"
date: "12/30/2016"
output:
  html_document:
    toc: true
    toc_float: true
    toc_depth: 4
runtime: shiny
---

# Table of Contents


# 1. Introduction
The purpose of this Shiny Dashboard is to create an updated and interactive version of the Piface Java applet created by Russell V. Lenth _CITATION_. The ability to use interactive sliders and text boxes allows the user to see in real time how certain inputs, e.g. significance level or power, affect outputs, e.g. sample size or power. This will not only provide answers, but also provide education to the user about co-dependencies of the inputs and outputs.

## 1.1 R and R Studio
This Shiny Dashboard is programmed using `R` version 3.2.2 and RStudio version 0.99.489. Four packages, besides the base packages included in R, are used for dashboard setup and for statistical calculations.

## 1.2 Packages
### 1.2.1 [shiny](https://cran.r-project.org/web/packages/shiny/shiny.pdf) 
The `shiny` package in R "Makes it incredibly easy to build interactive web applications with R."_CITATION (URL above)_ It uses R functions to create HTML code for a web page. There are various different input, display, and settings options that can be customized all within the same shiny application.

### 1.2.2 [shinydashboard](https://cran.r-project.org/web/packages/shinydashboard/shinydashboard.pdf)  
The `shinydashboard` package expands beyond the `shiny` package to add themes to the dashboard for a more attractive look.

### 1.2.3 [pwr](https://cran.rstudio.com/web/packages/pwr/pwr.pdf)  
The `pwr` package calculates power and sample sizes for various different situations using Cohen _1980_ as a basis for the calculations. In this dashboard, the `pwr` package is used for the calculations of the One Sample Mean, One Sample Proportion, Two Sample Means, and Two Sample Proportions tabs.

### 1.2.4 [gsDesign](https://cran.r-project.org/web/packages/gsDesign/gsDesign.pdf)  
The `gsDesign` package is used for power and sample size calculations of time to event studies. Specifically, it incorporates factors targeting the time component that is common these types of studies.

# 2. Using the Application
The first thing to choose is which tab to use with each representing a different situation. After the tab selection, the selection of what to solve for is the next step. All of the tabs have a `selectizeInput` located at the top of the dashboard page.

```{r, echo=FALSE}
selectizeInput(inputId = "solvefor_OM",
               label = p("Solve For"),
               choices = c("Sample Size", "Power", "Precision"),
               selected = "Sample Size",
               multiple = FALSE,
               options = NULL,
               width = "100%")
```

The `selectizeInput` above is used for both the One Sample Mean and One Sample Proportion tabs and shows that Sample Size, Power, and Precision can be calculated. The rest of the dashboard page will then update based on what is being solved for.

The setup of each of the tabs is very similar with only the specific inputs being slightly different. The One Sample Mean, One Sample Proportion, Two Sample Means, and Two Sample Proportions tabs are all set up with study information on the left-hand panel and calculation information as well as the calculation itself on the right-hand panel. The Time to Event tab is slightly different in that the study information in on the left-hand panel, population information in on the middle panel, and the calculation information and the calculation itself on the right-hand panel. For all of the tabs, the calculation is outlined in green as seen below.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/Output.png)

Within the tabs, there are text, slider, and selector inputs. Each numeric variable has both a text box and a slider that can be manipulated. Updating either of them will have the same effect and will automatically be updated once the other is manipulated. The calculations will be performed immediately after an input is manipulated. It should be noted that although the calculated variable text box and slider can be manipulated, it will not cause any new calculations to be performed.


# 3. Application Tabs


<!--------------- One Sample Mean --------------->
## 3.1 One Sample Mean
### 3.1.1 Parameters

* Mean - The mean of the target population
* True Mean - The mean of the reference population
* Standard Deviation - The standard deviation of the measure for the target population
* Sample Size - The sample size of the experimental population
* Significance Level - The probability of incorrectly rejecting a true null hypothesis
* Power - The probability of correctly rejecting a false null hypothesis
* Precision - The distance in one direction of the confidence interval from the mean
* Confidence Interval - The interval in which the mean is likely to fall within

### 3.1.2 Use of Parameters
Sample size, power, precision, and confidence interval are all parameters that can be calculated, while sample size and power are parameters that can be used as input parameters for calculations. All of the other parameters can be changed and manipulated resulting in different values for sample size, power, or precision.

### 3.1.3 Statistical Explanation


### 3.1.4 Example
__Solving for Sample Size:__ A study is being performed to examine the heart rates of people after having walked for 5 minutes. Heart rate is a measurement that can be summarized using the mean. Say it is known that the average resting heart rate is 70 beats per minute. The goal of the study is to determine if the heart rate of participants having walked for 5 minutes is different than an average resting heart rate. The researches performed a pilot study and have data about the mean and standard deviation of the heart rate, say 72 and 5 respectively. They decide that they want their study to be based on a significance level of 0.05 with 80% power. The researches want to know how large of a sample they will need to determine participants walking for 5 minutes have a different heart rate than the resting heart rate of an average person.

The researches would use the following values to determine what they need:

* Mean = 72
* True Mean = 70
* Standard Deviation = 5
* Significance Level = 0.05
* Power = 0.8

With the values put in by the researchers, they would find that a sample of 51 participants would be required.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/OM%20Sample%20Size.png)

__Solving for Power:__ Instead of determining how large of a sample the researches would need before they performed the study, they decided to just collect the data now and determine later how much power they would have later. They were able to record heart rates after walking 5 minutes for 25 participants and found a mean of 72 and a standard deviation of 5. They still require a significance level of 0.05. The researchers want to know how much power their study has.

The researchers would use the following values to determine what they need:

* Mean = 72
* True Mean = 70
* Standard Deviation = 5
* Significance Level = 0.05
* Sample Size = 25

With the values put in by the researches, they would find that their study has 48% power.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/OM%20Power.png)

__Solving for Precision:__ The researchers are now trying to report their findings from the study and would like to present a 95% confidence interval for the mean heart rate after walking for 5 minutes. The researches want to know how precise their measure is.

The researchers would use the following values to determine what they need:

* Mean = 72
* Standard Deviation = 5
* Significance Level = 0.05
* Sample Size = 25

With the values put in by the researches, they would find that their measure has a precision of 1.96 resulting in a 95% confidence interval of 70.04 to 73.96.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/OM%20Precision.png)


<!--------------- One Sample Proportion --------------->
## 3.2 One Sample Proportion
### 3.2.1 Parameters

* Proportion - The proportion affected in the target population
* True Proportion - The proportion affected in the reference population
* Sample Size - The sample size of the target population
* Significance Level - The probability of incorrectly rejecting a true null hypothesis
* Power - The probability of correctly rejecting a false null hypothesis
* Precision - The distance in one direction of the confidence interval from the mean
* Confidence Interval - The interval in which the mean is likely to fall within

### 3.2.2 Use of Parameters
Sample size, power, precision, and confidence interval are all parameters that can be calculated, while sample size and power are parameters that can be used as input parameters for calculations. All of the other parameters can be changed and manipulated resulting in different values for sample size, power, or precision.

### 3.2.3 Statistical Explanation


### 3.2.4 Example
__Solving for Sample Size:__ A study is being performed to examine the effect of a new drug on treating headaches. Previous research has shown that the drug that is considered industry standard eases headaches in 60% of people. The goal of this study is to compare this new drug's effect on easing headaches to the industry standard. The researches have reason to believe that their new drug helps to ease headaches in 70% of people. They decide that they want their study to be based on a significance level of 0.05 with 80% power. The researches want to know how large of a sample they will need to determine the proportion affected by their new drug is different than the proportion of participants affected by the industry standard.

The researches would use the following values to determine what they need:

* Proportion: 0.7
* True Proportion: 0.6
* Significance Level = 0.05
* Power = 0.8

With the values put in by the researchers, they would find that a sample of 178 participants would be required.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/OP%20Sample%20Size.png)

__Solving for Power:__ Instead of determining how large of a sample the researches would need before they performed the study, they decided to just collect the data now and determine later how much power they would have later. They were able to collect data for 100 participants and found that 70% of them had their headaches eased. They still require a significance level of 0.05. The researches want to know how much power their study has.

The researchers would use the following values to determine what they need:

* Proportion = 0.7
* True Proportion = 0.6
* Significance Level = 0.05
* Sample Size = 100

With the values put in by the researches, they would find that their study has 56% power.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/OP%20Power.png)

__Solving for Precision:__ The researchers are now trying to report their findings from the study and would like to present a 95% confidence interval for the proportion of participants affected by their new drug. The researches want to know how precise their measure is.

The researchers would use the following values to determine what they need:

* Proportion = 0.7
* Significance Level = 0.05
* Sample Size = 100

With the values put in by the researches, they would find that their measure has a precision of 1.96 resulting in a 95% confidence interval of 70.04 to 73.96.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/OP%20Precision.png)


<!--------------- Two Sample Means --------------->
## 3.3 Two Sample Means
### 3.3.1 Parameters

* Mean One - The mean of the first population
* Sample Size One - The sample size of the first population
* Mean Two - The mean of the second population
* Sample Size Two - The sample size of the second population
* Standard Deviation - The standard deviation of the measure for the target population
* Significance Level - The probability of incorrectly rejecting a true null hypothesis
* Power - The probability of correctly rejecting a false null hypothesis

### 3.3.2 Use of Parameters
Sample size and power are both parameters that can be calculated or used as input parameters for calculations. All of the other parameters can be changed and manipulated resulting in different values for sample size or power.

### 3.3.3 Statistical Explanation

### 3.3.4 Example
__Solving for Sample Size:__ A study is being performed to examine the resting hear rates of both men and women. The researchers were able to recruit 30 men to particpate in the study and now need to determine how many women are needed to recuit in order to have sufficient power. They decide that they want their study to be based on a significance level of 0.05 with 80% power. They performed a pilot study that found the average male resting heart rate was 70 while the average female heart rate was 75. The standard deviation for the resting heart rate was found to be 7. The researches want to know how large of a sample of women is needed to be able to determine if there is a difference between the two genders.

The researches would use the following values to determine what they need:

* Mean One = 70
* Sample Size One = 30
* Mean Two = 75
* Standard Deviation = 7
* Significance Level = 0.05
* Power = 0.8

With the values put in by the researchers, they would find that a sample of 34 women would be required.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TM%20Sample%20Size.png)

__Solving for Power:__ The research decided, for ease, to recruit just as many women as they had men. Thus, the study obtained resting heart rate data for 30 men and 30 women. The resting heart rate measurement had a standard deviation of 7. They still require a significance level of 0.05. The researches want to know how much power their study has.

The researchers would use the following values to determine what they need:

* Mean One = 70
* Sample Size One = 30
* Mean Two = 75
* Sample Size Two = 30
* Standard Deviation = 7
* Significance Level = 0.05

With the values put in by the researches, they would find that their study has 78% power.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TM%20Power.png)


<!--------------- Two Sample Proportions --------------->
## 3.4 Two Sample Proportions
### 3.4.1 Parameters

* Proportion One - The proportion affected in population one
* Sample Size One - The sample size of population one
* Proportion Two - The proportion affected in population two
* Sample Size Two - The sample size of population two
* Significance Level - The probability of incorrectly rejecting a true null hypothesis
* Power - The probability of correctly rejecting a false null hypothesis

### 3.4.2 Use of Parameters
Sample size and power are both parameters that can be calculated or used as input parameters for calculations. All of the other parameters can be changed and manipulated resulting in different values for sample size or power.

### 3.4.3 Statistical Explanation

### 3.4.4 Example
__Solving for Sample Size:__ A study is being performed to examine the effect of easing headaches between a new drug and the industry standard drug. The researchers have reason to believe that their new drug helps to ease headaches in 75% of people while the industry standard eases headaches in 50% of people. The researchers have recruited 100 participants to take the industry standard drug and are wondering how many participants they will need to recruit to take their new drug. They decide that they want their study to be based on a significance level of 0.05 with 80% power. The researchers want to know how large of a sample they will need to determine the proportion affected by their new drug is different than the proportion of participants affected by the industry standard.

The researches would use the following values to determine what they need:

* Proportion One: 0.5
* Sample Size One: 50
* Proportion Two: 0.75
* Significance Level = 0.05
* Power = 0.8

With the values put in by the researchers, they would find that a sample of 67 participants would be required.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TP%20Sample%20Size.png)

__Solving for Power:__ The research decided, for ease, to recruit the same number of participants to take their drug as those who take the industry standard drug. This means they collected data on 50 participants taking each drug. They found that 50% of participants had their headache ease with the industry standard drug while 75% of participants had their headache ease with their new drug. They still require a significance level of 0.05. The researches want to know how much power their study has.

The researches would use the following values to determine what they need:

* Proportion One: 0.5
* Sample Size One: 50
* Proportion Two: 0.75
* Sample Size Two: 50
* Significance Level = 0.05

With the values put in by the researches, they would find that their study has 74% power.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TP%20Power.png)


<!--------------- Time to Event --------------->
## 3.5 Time to Event
### 3.5.1 Parameters

* Enrollment Schedule - The time at which participants are enrolled in the study
* Distribution of Enrollment - The distribution of how participants are enrolled
* Rate - Rate of growth (decay) under the exponential enrollment assumption
* Study Duration - The duration of the study in units of time
* Enrollment Duration - The duration of enrollment in units of time
* Sample Allocation Ratio - The ratio of sample sizes for population one to population two
* Targeted Event Rate - The number of events per unit of time for the targeted population
* Targeted Censoring Rate - The rate at which events will not be observed in the targeted population
* Reference Event Rate - The number of events per unit of time for the reference population
* Reference Censoring Rate - The rate at which events will not be observed in the reference population
* Total Sample Size - The total sample size of both the targeted and reference populations added together
* Significance Level - The probability of incorrectly rejecting a true null hypothesis
* Power - The probability of correctly rejecting a false null hypothesis

### 3.5.2 Use of Parameters
Sample size and power are both parameters that can be calculated or used as input parameters for calculations. All of the other parameters can be changed and manipulated resulting in different values for sample size or power. Distribution of enrollment becomes visible if either "All at Once" or "Continuous Throughout" are selected for the enrollment schedule. Rate becomes visible if distribution of enrollment is visible and if "Exponential" has been selected. Enrollment duration disappears when "Continuous Throughout" is selected for the distribution of enrollment. The censor rates inputs should be set to 0 if the observed event rate is used for the event rate inputs. When a censor rate is greater than 0, it will change the inputted event rate to reflect what rate the events will actually be observed based on the censor rate.

### 3.5.3 Statistical Explanation

### 3.5.4 Example
__Solving for Sample Size:__ A study is being performed to examine the effectiveness of a new drug for preventing breast cancer reccurrence. The goal of the study is to compare the inclusion of this new drug with general lifestyle guidlines to just following the lifestyle guidlines. The study is set to be 10 years long in order to allow for the possiblity of relapse with participants being recruited within the first 2 years of the study. It is expected that recruitment will start out relatively quickly, but then slow gradually. The researches will recruit the same number of participants for each of the two groups. Using general lifestyle guidlines, the researchers expect to see 2 reccurrences per year. However, the researches expect that using their new drug will reduce the number of reccurrences to only 1 per year. The researchers have various methods set up for following the participants over the course of the study, but they believe that both groups have 10% chance of one their reccurrence not being observed or found by the researchers. The researchers decide that they still want to have a significance level of 0.05 and a 80% power. The researchers want to know how many participants will need to be recruited with a one-to-one allocation ration between the two groups.

The researches would use the following values to determine what they need:

* Enrollment Schedule: Over a Period
* Distribution of Enrollment: Exponential
* Rate: 0.5
* Study Duration: 10 (years)
* Enrollment: 2 (years)
* Sample Allocation Ratio: 1
* Targeted Event Rate: 1 (recurrence per year)
* Targeted Censoring Rate: 0.1
* Reference Event Rate: 2 (recurrences per year)
* Reference Censoring Rate: 0.1
* Significance Level: 0.05
* Power: 0.8

With the values put in by the researches, they would find that they need to recruit a total of 58 participants, 29 in each arm.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TTE%20Sample%20Size%20a.png)

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TTE%20Sample%20Size%20b.png)

__Solving for Power__:  A study was performed where the researchers were examining the effect of a new drugâ€™s ability to help prevent cancer recurrence. The two arms of the study were general lifestyle guidelines with and without the new drug with 200 and 100 participants in each arm respectively. The study lasted 10 years with recruitment having been completed by the beginning of the study. The researchers found that group without the drug experienced recurrences at a rate of 3 per year, while the group taking the new drug experienced recurrences at a rate of 2 per year. It was estimated that both of the populations had a censor rate of 15%. They  want to maintain a 0.05 significance level. The researchers want to know how much power their study had.

The researches would use the following values to determine what they need:

* Enrollment Schedule: All at Once
* Study Duration: 10 (years)
* Sample Allocation Ratio: 0.5
* Reference Event Rate: 3 (recurrences per year)
* Targeted Event Rate: 2 (recurrences per year)
* Reference Censor Rate: 0.15
* Targeted Censor Rate: 0.15
* Significance Level: 0.05
* Total Sample Size: 300

With the values put in by the researches, they would find that their study has 94% power.

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TTE%20Power%20a.png)

![](https://raw.githubusercontent.com/mattpartridge/ShinySampleSizes/master/Documentation/Screen%20Shots/TTE%20Power%20b.png)

<!--
Control 2 Reference

Experimental 2 Targeted
-->

# 4 References






